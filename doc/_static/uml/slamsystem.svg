<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1230px" preserveAspectRatio="none" style="width:1091px;height:1230px;" version="1.1" viewBox="0 0 1091 1230" width="1091px" zoomAndPan="magnify"><defs><filter height="300%" id="f14rrgxzv223bi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="387" x="352" y="23.3369">Assuming processing happens faster than frame rate.</text><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="350.4653"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="562.9712"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="165.6323" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="686.2241"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="880.9829"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="1064.3623"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="68.5801" y2="175.9595"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="92.5" x2="92.5" y1="175.9595" y2="203.9595"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="203.9595" y2="203.9595"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="92.5" x2="92.5" y1="203.9595" y2="231.9595"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="231.9595" y2="388.4653"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="92.5" x2="92.5" y1="388.4653" y2="416.4653"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="416.4653" y2="416.4653"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="92.5" x2="92.5" y1="416.4653" y2="444.4653"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="444.4653" y2="958.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="92.5" x2="92.5" y1="958.1094" y2="986.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="986.1094" y2="986.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="92.5" x2="92.5" y1="986.1094" y2="1014.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="92.5" y1="1014.1094" y2="1190.6152"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="68.5801" y2="175.9595"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="337.5" x2="337.5" y1="175.9595" y2="203.9595"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="203.9595" y2="203.9595"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="337.5" x2="337.5" y1="203.9595" y2="231.9595"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="231.9595" y2="388.4653"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="337.5" x2="337.5" y1="388.4653" y2="416.4653"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="416.4653" y2="416.4653"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="337.5" x2="337.5" y1="416.4653" y2="444.4653"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="444.4653" y2="958.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="337.5" x2="337.5" y1="958.1094" y2="986.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="986.1094" y2="986.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="337.5" x2="337.5" y1="986.1094" y2="1014.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="337.5" y1="1014.1094" y2="1190.6152"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="68.5801" y2="175.9595"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="810.5" x2="810.5" y1="175.9595" y2="203.9595"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="203.9595" y2="203.9595"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="810.5" x2="810.5" y1="203.9595" y2="231.9595"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="231.9595" y2="388.4653"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="810.5" x2="810.5" y1="388.4653" y2="416.4653"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="416.4653" y2="416.4653"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="810.5" x2="810.5" y1="416.4653" y2="444.4653"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="444.4653" y2="958.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="810.5" x2="810.5" y1="958.1094" y2="986.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="986.1094" y2="986.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="810.5" x2="810.5" y1="986.1094" y2="1014.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810.5" x2="810.5" y1="1014.1094" y2="1190.6152"/><rect fill="#FEFECE" filter="url(#f14rrgxzv223bi)" height="30.29" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="43.5" y="33.29"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="50.5" y="53.5928">SlamSystem</text><rect fill="#FEFECE" filter="url(#f14rrgxzv223bi)" height="30.29" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="43.5" y="1189.6152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="50.5" y="1209.918">SlamSystem</text><rect fill="#FEFECE" filter="url(#f14rrgxzv223bi)" height="30.29" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="274.5" y="33.29"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="281.5" y="53.5928">TrackingThread</text><rect fill="#FEFECE" filter="url(#f14rrgxzv223bi)" height="30.29" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="274.5" y="1189.6152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="281.5" y="1209.918">TrackingThread</text><rect fill="#FEFECE" filter="url(#f14rrgxzv223bi)" height="30.29" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="747.5" y="33.29"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="754.5" y="53.5928">MappingThread</text><rect fill="#FEFECE" filter="url(#f14rrgxzv223bi)" height="30.29" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="747.5" y="1189.6152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="754.5" y="1209.918">MappingThread</text><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="350.4653"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="562.9712"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="165.6323" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="686.2241"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="880.9829"/><rect fill="#FFFFFF" filter="url(#f14rrgxzv223bi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806" y="1064.3623"/><polygon fill="#A80036" points="81,95.7065,91,99.7065,81,103.7065,85,99.7065" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="87" y1="99.7065" y2="99.7065"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="10" y="94.9326">nextImage</text><polygon fill="#A80036" points="326,124.833,336,128.833,326,132.833,330,128.833" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="332" y1="128.833" y2="128.833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="100" y="124.0591">doTrackSet frame 0 (non-blocking)</text><path d="M171,141.833 L171,166.833 L500,166.833 L500,151.833 L490,141.833 L171,141.833 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M490,141.833 L490,151.833 L500,151.833 L490,141.833 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="177" y="159.1855">No Keyframe yet, makes frame 0 into Keyframe A</text><polygon fill="#A80036" points="81,249.0859,91,253.0859,81,257.0859,85,253.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="87" y1="253.0859" y2="253.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="10" y="248.312">nextImage</text><polygon fill="#A80036" points="326,278.2124,336,282.2124,326,286.2124,330,282.2124" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="332" y1="282.2124" y2="282.2124"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="100" y="277.4385">doTrackSet frame 1 (non-blocking)</text><path d="M231,295.2124 L231,320.2124 L441,320.2124 L441,305.2124 L431,295.2124 L231,295.2124 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M431,295.2124 L431,305.2124 L441,305.2124 L431,295.2124 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="237" y="312.5649">Tracks frame 1 on Keyframe A</text><polygon fill="#A80036" points="794,346.4653,804,350.4653,794,354.4653,798,350.4653" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338" x2="800" y1="350.4653" y2="350.4653"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="345" y="345.6914">doMapSet frame 1 on Keyframe A (non-blocking)</text><polygon fill="#A80036" points="81,461.5918,91,465.5918,81,469.5918,85,465.5918" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="87" y1="465.5918" y2="465.5918"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="10" y="460.8179">nextImage</text><polygon fill="#A80036" points="326,490.7183,336,494.7183,326,498.7183,330,494.7183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="332" y1="494.7183" y2="494.7183"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="100" y="489.9443">doTrackSet frame 2 (non-blocking)</text><path d="M231,507.7183 L231,532.7183 L441,532.7183 L441,517.7183 L431,507.7183 L231,507.7183 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M431,507.7183 L431,517.7183 L441,517.7183 L431,507.7183 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="237" y="525.0708">Tracks frame 2 on Keyframe A</text><polygon fill="#A80036" points="794,558.9712,804,562.9712,794,566.9712,798,562.9712" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338" x2="800" y1="562.9712" y2="562.9712"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="345" y="558.1973">doMapSet frame 2 on Keyframe A (non-blocking)</text><path d="M182,605.9712 L182,630.9712 L489,630.9712 L489,615.9712 L479,605.9712 L182,605.9712 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M479,605.9712 L479,615.9712 L489,615.9712 L479,605.9712 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="188" y="623.3237">Determines frame 2 should be next KeyFrame</text><polygon fill="#A80036" points="794,682.2241,804,686.2241,794,690.2241,798,686.2241" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338" x2="800" y1="686.2241" y2="686.2241"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="449" x="345" y="681.4502">doCreateNewKeyFrame of frame 2 based on KeyFrame A (non-blocking)</text><path d="M538,699.2241 L538,724.2241 L1079,724.2241 L1079,709.2241 L1069,699.2241 L538,699.2241 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1069,699.2241 L1069,709.2241 L1079,709.2241 L1069,699.2241 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="520" x="544" y="716.5767">Initialize KeyFrame B from frame 2; Project KeyFrame A's depth map to KeyFrame B.</text><polygon fill="#A80036" points="81,750.4771,91,754.4771,81,758.4771,85,754.4771" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="87" y1="754.4771" y2="754.4771"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="10" y="749.7031">nextImage</text><polygon fill="#A80036" points="326,779.6035,336,783.6035,326,787.6035,330,783.6035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="332" y1="783.6035" y2="783.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="100" y="778.8296">doTrackSet frame 3 (non-blocking)</text><path d="M213,796.6035 L213,821.6035 L459,821.6035 L459,806.6035 L449,796.6035 L213,796.6035 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M449,796.6035 L449,806.6035 L459,806.6035 L449,796.6035 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="219" y="813.9561">Tracks frame 3 on Keyframe A (still)</text><polygon fill="#A80036" points="349,847.8564,339,851.8564,349,855.8564,345,851.8564" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="810" y1="851.8564" y2="851.8564"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="355" y="847.0825">doUseNewKeyFrame with KeyFrame B</text><polygon fill="#A80036" points="794,876.9829,804,880.9829,794,884.9829,798,880.9829" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338" x2="800" y1="880.9829" y2="880.9829"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="345" y="876.209">doMapSet frame 3 on Keyframe A (non-blocking)</text><path d="M701,923.9829 L701,948.9829 L917,948.9829 L917,933.9829 L907,923.9829 L701,923.9829 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M907,923.9829 L907,933.9829 L917,933.9829 L907,923.9829 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="707" y="941.3354">Maps frame 3 onto KeyFrame A</text><polygon fill="#A80036" points="81,1031.2358,91,1035.2358,81,1039.2358,85,1035.2358" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="87" y1="1035.2358" y2="1035.2358"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="10" y="1030.4619">nextImage</text><polygon fill="#A80036" points="326,1060.3623,336,1064.3623,326,1068.3623,330,1064.3623" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="332" y1="1064.3623" y2="1064.3623"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="100" y="1059.5884">doTrackSet frame 4 (non-blocking)</text><path d="M232,1107.3623 L232,1132.3623 L440,1132.3623 L440,1117.3623 L430,1107.3623 L232,1107.3623 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M430,1107.3623 L430,1117.3623 L440,1117.3623 L430,1107.3623 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="238" y="1124.7148">Tracks frame 4 on Keyframe B</text><path d="M702,1146.4888 L702,1171.4888 L916,1171.4888 L916,1156.4888 L906,1146.4888 L702,1146.4888 " fill="#FBFB77" filter="url(#f14rrgxzv223bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M906,1146.4888 L906,1156.4888 L916,1156.4888 L906,1146.4888 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="708" y="1163.8413">Maps frame 4 onto KeyFrame B</text><!--
@startuml

title Assuming processing happens faster than frame rate.

[-> SlamSystem: nextImage

SlamSystem -> TrackingThread: doTrackSet frame 0 (non-blocking)
note over TrackingThread: No Keyframe yet, makes frame 0 into Keyframe A

...
...

[-> SlamSystem: nextImage
SlamSystem -> TrackingThread: doTrackSet frame 1 (non-blocking)
note over TrackingThread: Tracks frame 1 on Keyframe A

TrackingThread -> MappingThread: doMapSet frame 1 on Keyframe A (non-blocking)
activate MappingThread
deactivate MappingThread

...
...

[-> SlamSystem: nextImage
SlamSystem -> TrackingThread: doTrackSet frame 2 (non-blocking)
note over TrackingThread: Tracks frame 2 on Keyframe A

TrackingThread -> MappingThread: doMapSet frame 2 on Keyframe A (non-blocking)
activate MappingThread

note over TrackingThread: Determines frame 2 should be next KeyFrame

|||
deactivate MappingThread

TrackingThread -> MappingThread: doCreateNewKeyFrame of frame 2 based on KeyFrame A (non-blocking)
activate MappingThread
note over MappingThread:  Initialize KeyFrame B from frame 2; Project KeyFrame A's depth map to KeyFrame B.

[-> SlamSystem: nextImage
SlamSystem -> TrackingThread: doTrackSet frame 3 (non-blocking)
note over TrackingThread: Tracks frame 3 on Keyframe A (still)

MappingThread -> TrackingThread: doUseNewKeyFrame with KeyFrame B
deactivate MappingThread

TrackingThread -> MappingThread: doMapSet frame 3 on Keyframe A (non-blocking)
activate MappingThread
note over MappingThread:  Maps frame 3 onto KeyFrame A
deactivate MappingThread

...
...

[-> SlamSystem: nextImage
SlamSystem -> TrackingThread: doTrackSet frame 4 (non-blocking)
note over TrackingThread: Tracks frame 4 on Keyframe B
note over MappingThread:  Maps frame 4 onto KeyFrame B
activate MappingThread
deactivate MappingThread

@enduml

PlantUML version 1.2018.05(Sat May 05 20:00:17 GMT 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_161-b12
Operating System: Linux
OS Version: 4.9.125-linuxkit
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>